@page "/products/{CategoryId}"
@using TackleStore.Clients.Services
@using TackleStore.Models

@inject ShellNavigationManager NavigationManager

<StackLayout>
    @foreach (var product in Products)
    {
       <TackleStore.Clients.Components.ProductItem Product="product" />

    }
</StackLayout>

@code {
    [Parameter] public string CategoryId { get; set; }

    private List<Product> Products { get; set; } = new List<Product>();

    protected async override Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();

        if (int.TryParse(CategoryId, out int id))
        {
            Products = await ProductService.Get(id);
        }

    }

}
